<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="Standgewässer" pageWidth="842" pageHeight="595" orientation="Landscape" columnWidth="802" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" scriptletClass="de.cismet.cids.custom.reports.scriptlets.WkFgScriptlet">
	<import value="de.cismet.cids.dynamics.CidsBean"/>
	<import value="net.sf.jasperreports.engine.data.JRBeanCollectionDataSource"/>
	<style name="detail_style" isDefault="false" fill="Solid" hAlign="Center" vAlign="Middle" fontSize="6" isBold="false" isItalic="false" isUnderline="false" isStrikeThrough="false" isPdfEmbedded="true">
		<box leftPadding="2">
			<leftPen lineWidth="0.25"/>
			<bottomPen lineWidth="0.25"/>
			<rightPen lineWidth="0.25"/>
		</box>
	</style>
	<style name="column_header_style" isDefault="false" mode="Opaque" fill="Solid" hAlign="Center" vAlign="Middle" fontSize="6" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfFontName="Helvetica-Bold" isPdfEmbedded="true">
		<box leftPadding="2">
			<pen lineWidth="0.0"/>
			<topPen lineWidth="0.25"/>
			<leftPen lineWidth="0.25"/>
			<bottomPen lineWidth="0.25"/>
			<rightPen lineWidth="0.25"/>
		</box>
	</style>
	<subDataset name="dataset1"/>
	<parameter name="SUBREPORT_DIR" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["/home/jruiz/NetBeansProjects/svn/cids-custom-wrrl-db-mv/src/main/resources/de/cismet/cids/custom/reports/"]]></defaultValueExpression>
	</parameter>
	<parameter name="STATIONIERUNGEN" class="java.lang.String"/>
	<parameter name="GEWAESSERKENNZAHLEN" class="java.lang.String"/>
	<parameter name="LAWA-DETAILTYP" class="java.lang.String"/>
	<parameter name="BEWIRTSCHAFTUNGSBEREICHE" class="java.lang.String"/>
	<field name="massn_id" class="java.lang.String"/>
	<field name="massnahme" class="java.lang.String"/>
	<field name="prioritaet" class="de.cismet.cids.dynamics.CidsBean"/>
	<field name="suppl_cd" class="de.cismet.cids.dynamics.CidsBean"/>
	<field name="real" class="java.math.BigDecimal"/>
	<field name="kosten" class="java.math.BigDecimal"/>
	<field name="ziele" class="java.lang.String"/>
	<field name="linie" class="de.cismet.cids.dynamics.CidsBean"/>
	<field name="massn_typ" class="de.cismet.cids.dynamics.CidsBean"/>
	<field name="revital" class="de.cismet.cids.dynamics.CidsBean"/>
	<field name="realisierung" class="de.cismet.cids.dynamics.CidsBean"/>
	<field name="wk_fg.wk_n" class="java.lang.String"/>
	<field name="wk_fg.wk_k" class="java.lang.String"/>
	<field name="wk_fg.lawa_type.description" class="java.lang.String"/>
	<field name="wk_fg.lawa_type.code" class="java.lang.Integer"/>
	<field name="realisierung.name" class="java.lang.String"/>
	<field name="stalu.value" class="java.lang.String"/>
	<field name="wk_fg.bemerkung" class="java.lang.String"/>
	<field name="wk_fg.evk.name" class="java.lang.String"/>
	<field name="de_meas_cd" class="java.util.Collection"/>
	<field name="linie.von.route.gwk" class="java.lang.Long"/>
	<background>
		<band/>
	</background>
	<title>
		<band height="42">
			<textField>
				<reportElement style="column_header_style" mode="Transparent" x="0" y="32" width="400" height="10" backcolor="#DADADA"/>
				<box leftPadding="5">
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Left" verticalAlignment="Middle">
					<font size="8" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["Wasserkörpername:" + $F{wk_fg.wk_n}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement style="column_header_style" mode="Transparent" x="400" y="32" width="402" height="10" backcolor="#DADADA"/>
				<box leftPadding="5">
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Left" verticalAlignment="Middle">
					<font size="8" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["Wasserkörperkürzel:" + $F{wk_fg.wk_k}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement mode="Transparent" x="0" y="0" width="802" height="19" forecolor="#000000"/>
				<box topPadding="1" leftPadding="1" bottomPadding="1" rightPadding="1">
					<pen lineWidth="0.0" lineStyle="Solid" lineColor="#FFFFFF"/>
					<topPen lineWidth="0.0" lineColor="#FFFFFF"/>
					<leftPen lineWidth="0.0" lineColor="#FFFFFF"/>
					<bottomPen lineWidth="0.0" lineColor="#FFFFFF"/>
					<rightPen lineWidth="0.0" lineColor="#FFFFFF"/>
				</box>
				<textElement>
					<font size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[5.2 Umgesetzte Maßnahmen]]></text>
			</staticText>
		</band>
	</title>
	<pageHeader>
		<band/>
	</pageHeader>
	<columnHeader>
		<band height="65">
			<staticText>
				<reportElement style="column_header_style" mode="Opaque" x="0" y="0" width="68" height="65" backcolor="#DADADA"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<text><![CDATA[Maßnahme-nummer]]></text>
			</staticText>
			<staticText>
				<reportElement style="column_header_style" x="182" y="0" width="218" height="65" backcolor="#DADADA"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<text><![CDATA[Maßnahmenbeschreibung]]></text>
			</staticText>
			<staticText>
				<reportElement style="column_header_style" x="463" y="0" width="70" height="20" backcolor="#DADADA"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<text><![CDATA[Stationierung]]></text>
			</staticText>
			<staticText>
				<reportElement style="column_header_style" x="463" y="20" width="35" height="45" backcolor="#DADADA"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<text><![CDATA[von]]></text>
			</staticText>
			<staticText>
				<reportElement style="column_header_style" x="498" y="20" width="35" height="45" backcolor="#DADADA"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<text><![CDATA[bis]]></text>
			</staticText>
			<staticText>
				<reportElement style="column_header_style" mode="Opaque" x="743" y="0" width="59" height="65" backcolor="#DADADA"/>
				<textElement markup="html">
					<font size="8"/>
				</textElement>
				<text><![CDATA[Umsetzung]]></text>
			</staticText>
			<staticText>
				<reportElement style="column_header_style" mode="Opaque" x="568" y="0" width="175" height="65" backcolor="#DADADA"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<text><![CDATA[Maßnahme-Typ]]></text>
			</staticText>
			<staticText>
				<reportElement style="column_header_style" mode="Opaque" x="68" y="0" width="114" height="65" backcolor="#DADADA"/>
				<textElement markup="html">
					<font size="8"/>
				</textElement>
				<text><![CDATA[Kurzbezeichnung<br />Maßnahme]]></text>
			</staticText>
			<staticText>
				<reportElement style="column_header_style" mode="Opaque" x="400" y="0" width="63" height="65" backcolor="#DADADA"/>
				<textElement markup="html">
					<font size="8"/>
				</textElement>
				<text><![CDATA[Gewässer<br />- <br />Kennzahl]]></text>
			</staticText>
			<staticText>
				<reportElement style="column_header_style" x="533" y="0" width="35" height="65" backcolor="#DADADA"/>
				<textElement markup="html">
					<font size="8"/>
				</textElement>
				<text><![CDATA[Länge <br /> (m)]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="16">
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement style="detail_style" stretchType="RelativeToBandHeight" x="0" y="0" width="68" height="16" isPrintWhenDetailOverflows="true"/>
				<box leftPadding="5"/>
				<textElement textAlignment="Left" verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{massn_id}.substring($F{massn_id}.indexOf("_M") + 1, Math.min( ($F{massn_id}.indexOf(" ") == -1 ? Integer.MAX_VALUE : $F{massn_id}.indexOf(" ")) , $F{massn_id}.length()))]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="#,##0" isBlankWhenNull="true">
				<reportElement style="detail_style" stretchType="RelativeToBandHeight" x="463" y="0" width="35" height="16" isPrintWhenDetailOverflows="true"/>
				<box leftPadding="5"/>
				<textElement textAlignment="Left">
					<font size="8"/>
				</textElement>
				<textFieldExpression class="java.lang.Number"><![CDATA[((CidsBean) ($F{linie}.getProperty("von"))).getProperty("wert")]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="#,##0" isBlankWhenNull="true">
				<reportElement style="detail_style" stretchType="RelativeToBandHeight" x="498" y="0" width="35" height="16" isPrintWhenDetailOverflows="true"/>
				<box leftPadding="5"/>
				<textElement textAlignment="Left">
					<font size="8"/>
				</textElement>
				<textFieldExpression class="java.lang.Number"><![CDATA[((CidsBean) ($F{linie}.getProperty("bis"))).getProperty("wert")]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement style="detail_style" stretchType="RelativeToBandHeight" x="182" y="0" width="218" height="16" isPrintWhenDetailOverflows="true"/>
				<box leftPadding="5"/>
				<textElement textAlignment="Left" verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{massnahme}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement style="detail_style" stretchType="RelativeToBandHeight" x="743" y="0" width="59" height="16" isPrintWhenDetailOverflows="true"/>
				<box leftPadding="5"/>
				<textElement textAlignment="Left">
					<font size="8"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{realisierung.name}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="true">
				<reportElement style="detail_style" stretchType="RelativeToBandHeight" x="568" y="0" width="175" height="16" isPrintWhenDetailOverflows="true"/>
				<box leftPadding="5"/>
				<textElement textAlignment="Left" verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$P{REPORT_SCRIPTLET}.formatMeasureTypeCodes($F{de_meas_cd})]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement style="detail_style" stretchType="RelativeToBandHeight" x="68" y="0" width="114" height="16" isPrintWhenDetailOverflows="true"/>
				<box leftPadding="5"/>
				<textElement textAlignment="Left" verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[($F{massn_id}.indexOf(" ") == -1 ? null :
$F{massn_id}.substring($F{massn_id}.indexOf(" ") + 3, $F{massn_id}.length()))]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="true">
				<reportElement style="detail_style" stretchType="RelativeToBandHeight" x="400" y="0" width="63" height="16" isPrintWhenDetailOverflows="true"/>
				<box leftPadding="5"/>
				<textElement textAlignment="Left" verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{linie.von.route.gwk}.toString()]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="#,##0" isBlankWhenNull="true">
				<reportElement style="detail_style" stretchType="RelativeToBandHeight" x="533" y="0" width="35" height="16" isPrintWhenDetailOverflows="true"/>
				<box leftPadding="5"/>
				<textElement textAlignment="Left">
					<font size="8"/>
				</textElement>
				<textFieldExpression class="java.lang.Number"><![CDATA[new Double(Math.abs(((Double)((CidsBean) ($F{linie}.getProperty("bis"))).getProperty("wert")).doubleValue() - ((Double)((CidsBean) ($F{linie}.getProperty("von"))).getProperty("wert")).doubleValue()))]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<columnFooter>
		<band/>
	</columnFooter>
</jasperReport>
